## 索引类型

## 1. B-tree索引

### 1.1： 特点
- 以B+树的结构存储数据

      - 平衡的查找树
      - 各个叶子节点之间，通过指针进行连接的
      - 所有的记录节点都是安装键值的大小顺序存放在同一层叶子节点上。

 - b-tree 索引能够加快数据的查询速度

 - b-tree 索引更适合进行范围查找(因为采用顺序结构进行存储的)

### 1.2： 在什么情况下可以用到B树索引

- 全值匹配的查询

          比如： order_sn = '34523452345'

- 匹配最左前缀的查询

- -匹配列前缀查询

          比如： order_sn like '34345%'

- 匹配范围值的查询

          比如： order_sn > '2342143'

- 精确匹配左前列并范围匹配另外一列

- 只访问索引的查询



### 1.3 使用限制

- 如果不是按照索引最左列开始查找，则无法使用索引
- 使用索引时不能跳过索引中的列
- not in 和 <> 操作无法使用索引
- 如果查询中有某个列的范围查询，则其右边所有列都无法使用索引



## 2. Hash 索引


### 2.1: 特点

- hash 索引是基于hash表实现，只有查询条件精确匹配hash索引中的所有列时，才能使用hash索引。
- hash索引只能用在等值查询中。
- 对于hash索引中的所有列，存储引擎都会为每一行计算一个hash码，hash索引中存储的就是hash码


###  2.2：限制

- hash 索引必须进行二次查询
- hash索引无法用于排序（由于使用hash码存储，不是key-value形式，所以无法排序）
- hash索引不支持部分索引查找，也不支持范围查找
- hash索引中hash码的计算可能存在hash冲突

## 3. 索引优化

- 索引列上不能使用表达式或者函数

优化前：
![比如3-1](比如3-1.png)

优化后：
![优化之后](优化之后.png)


- 对前缀索引和索引列进行选择性的使用

            在对索引的选择，既要保证索引尽可能的小，同时选择性不能太差。


![比如3-2：](比如3-2：.png)


- 经常会被使用到的列优先
- 选择性高的列优先
- 宽度小的列优先
- 覆盖索引优先

              什么覆盖索引？
              查询索引列 和 where，group by 等 从句中同时也出现了索引列
              就成为覆盖索引

              无法使用覆盖索引的情况：
              查询中使用太多的列
              使用了双%的like查询



- 使用索引扫描来优化排序

            索引的列顺序和order by 子句的顺序完全一致
            索引中所有列的方向和order by 子句完全一致
            order by 中字段全部在关联表中的第一张表中

- 利用索引优化锁

          索引可以减少锁定的行数
          索引可以加快处理速度，同时也加快了锁的释放
